<!-- Page Header -->
<div class="page-header">
  <div>
    <h1>Tableau de bord</h1>
    <p class="subtitle">Bienvenue, <%= user.firstName %>. Voici un aper√ßu de vos projets.</p>
  </div>
  <a href="/projects/new" class="btn btn-primary">
    <i data-lucide="plus"></i>
    Nouveau projet
  </a>
</div>

<!-- Stats Grid -->
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-icon green">
      <i data-lucide="folder"></i>
    </div>
    <div class="stat-info">
      <div class="stat-value"><%= stats.totalProjects %></div>
      <div class="stat-label">Projets totaux</div>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon purple">
      <i data-lucide="sparkles"></i>
    </div>
    <div class="stat-info">
      <div class="stat-value"><%= stats.totalVariants %></div>
      <div class="stat-label">Designs IA</div>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon orange">
      <i data-lucide="clock"></i>
    </div>
    <div class="stat-info">
      <div class="stat-value"><%= stats.inProgress %></div>
      <div class="stat-label">En cours</div>
    </div>
  </div>
  
  <div class="stat-card">
    <div class="stat-icon blue">
      <i data-lucide="check-circle"></i>
    </div>
    <div class="stat-info">
      <div class="stat-value"><%= stats.completedDesigns %></div>
      <div class="stat-label">Termin√©s</div>
    </div>
  </div>
</div>

<!-- Content Grid -->
<div class="content-grid">
  <!-- Left Column - Projects -->
  <div>
    <!-- Recent Projects -->
    <div class="content-card">
      <div class="card-header">
        <h2>Projets r√©cents</h2>
        <a href="/projects">Voir tout</a>
      </div>
      
      <% if (projects && projects.length > 0) { %>
        <div class="project-list">
          <% projects.slice(0, 5).forEach(project => { %>
            <a href="/projects/<%= project._id %>" class="project-item">
              <div class="project-thumb">
                <% if (project.designVariants && project.designVariants.length > 0) { %>
                  <img src="<%= project.designVariants[project.designVariants.length - 1].imageUrl || project.designVariants[project.designVariants.length - 1].thumbnailUrl %>" alt="<%= project.title %>">
                <% } else if (project.originalImages && project.originalImages.length > 0) { %>
                  <img src="<%= project.originalImages[0].url %>" alt="<%= project.title %>">
                <% } else { %>
                  <i data-lucide="image"></i>
                <% } %>
              </div>
              <div class="project-info">
                <h3><%= project.title %></h3>
                <p><%= project.roomType %><% if (project.style) { %> ‚Ä¢ <%= project.style %><% } %></p>
                <span class="project-status <%= project.status %>"><%= project.status %></span>
              </div>
            </a>
          <% }) %>
        </div>
      <% } else { %>
        <div class="empty-state">
          <div class="empty-state-icon">
            <i data-lucide="folder-plus"></i>
          </div>
          <h3>Aucun projet</h3>
          <p>Cr√©ez votre premier projet et laissez l'IA transformer votre espace</p>
          <a href="/projects/new" class="btn btn-primary">
            <i data-lucide="plus"></i>
            Cr√©er un projet
          </a>
        </div>
      <% } %>
    </div>
  </div>
  
  <!-- Right Column -->
  <div>
    <!-- AI Credits -->
    <div class="content-card ai-credits-card" style="margin-bottom: 16px;">
      <div class="card-body ai-credits-body">
        <div class="ai-credits-header">
          <span class="ai-credits-label">
            <i data-lucide="zap"></i>
            Cr√©dits IA
          </span>
          <a href="/pricing" class="ai-credits-link">Obtenir plus</a>
        </div>
        <div class="ai-credits-value"><%= user.subscription?.credits || 3 %></div>
        <div class="ai-credits-subtext"><%= user.isPremium ? 'Plan illimit√©' : 'sur 10 cr√©dits gratuits' %></div>
        <% if (!user.isPremium) { %>
          <div class="ai-credits-progress">
            <div class="ai-credits-progress-bar" style="width: <%= ((user.subscription?.credits || 3) / 10) * 100 %>%;"></div>
          </div>
        <% } %>
      </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="content-card" style="margin-bottom: 16px;">
      <div class="card-header">
        <h2>Actions rapides</h2>
      </div>
      <div class="card-body">
        <div class="quick-actions">
          <a href="/projects/new" class="quick-action">
            <i data-lucide="plus-circle"></i>
            <span>Nouveau projet</span>
          </a>
          <a href="/contractors" class="quick-action">
            <i data-lucide="hard-hat"></i>
            <span>Entrepreneurs</span>
          </a>
          <a href="/dashboard/messages" class="quick-action">
            <i data-lucide="message-square"></i>
            <span>Messages</span>
          </a>
          <a href="/gallery" class="quick-action">
            <i data-lucide="images"></i>
            <span>Galerie</span>
          </a>
        </div>
      </div>
    </div>
    
    <!-- Inspiration Cuisine -->
    <div class="content-card" style="margin-bottom: 16px;">
      <div class="card-header">
        <h2>üç≥ Inspiration Cuisine</h2>
        <div class="inspiration-dropdown">
          <select id="inspiration-select" class="inspiration-select" onchange="changeInspiration(this.value)">
            <option value="cuisine" selected>Cuisine</option>
            <option value="salon">Salon</option>
            <option value="chambre">Chambre</option>
            <option value="salle-de-bain">Salle de bain</option>
            <option value="exterieur">Ext√©rieur</option>
          </select>
        </div>
      </div>
      <div class="card-body" style="padding: 12px;">
        <div class="inspiration-grid">
          <a href="/inspiration/cuisine?style=moderne" class="inspiration-item">
            <img src="/assets/11houses/Modern Arabic.jpeg" alt="Cuisine Moderne">
            <span class="inspiration-label">Moderne</span>
          </a>
          <a href="/inspiration/cuisine?style=rustique" class="inspiration-item">
            <img src="/assets/11houses/Rustic.jpeg" alt="Cuisine Rustique">
            <span class="inspiration-label">Rustique</span>
          </a>
          <a href="/inspiration/cuisine?style=industriel" class="inspiration-item">
            <img src="/assets/11houses/Industrial.jpeg" alt="Cuisine Industrielle">
            <span class="inspiration-label">Industriel</span>
          </a>
          <a href="/inspiration/cuisine?style=luxe" class="inspiration-item">
            <img src="/assets/11houses/Luxury.jpeg" alt="Cuisine Luxe">
            <span class="inspiration-label">Luxe</span>
          </a>
        </div>
        <a href="/inspiration/cuisine" class="btn btn-outline btn-block" style="margin-top: 12px;">
          Voir toutes les inspirations
        </a>
      </div>
    </div>
    
    <script>
      function changeInspiration(type) {
        window.location.href = '/inspiration/' + type;
      }
    </script>
    
    <!-- Upgrade CTA -->
    <% if (!user.isPremium) { %>
      <div class="content-card upgrade-card">
        <div class="card-body upgrade-card-body">
          <div class="upgrade-card-icon">‚ö°</div>
          <h3>Passez √† Pro</h3>
          <p>G√©n√©rations IA illimit√©es et exports HD</p>
          <a href="/pricing" class="btn btn-primary btn-block">
            Passer √† Pro
          </a>
        </div>
      </div>
    <% } %>
  </div>
</div>
